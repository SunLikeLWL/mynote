
- SYN(建立联机)
- ACK(确认)
- PSH(传送)
- FIN(结束)
- RST(重置)
- URG(紧急)
 
 


# 三次握手
  1、第一次握手
  客户端向服务端发出请求连接的报文，这时同部位SYN=1，同时生成随机初始序列号 seq = x
  客户端进去同步已经发生的状态 SYN = 1，不能携带数据的，但是需要消耗掉一个序列号
  表示的意思是 客户端想要和服务器建立连接

  2、第二次握手
  服务端收到请求，如果同意连接的话，会发出确认的报文
  需要初始化一个序列号
  确认号 ack = x+1
  进入一个同步收到状态，也是不能携带数据的，询问顾客端是否准备好接收数据

  3、第三次握手
   顾客端收到确认后，还要向服务端发出确认的报文
   进入已经连接的状态
   可以携带数据
   如果不携带数据是不需要消耗 

 

 # 使用三次握手建立连接的原因


 网络不好的时候，请求没有及时到达这个服务器
 失效的报文
 服务端一直等待客户端发来消息


 # 建立连接传输数据

 Ack = Seq + 传递的字节数 + 1



 # 四次挥手

 1、第一次挥手
 客户端发出链接释放的报文，停止发送数据，也需要一个序号

 2、第二次挥手
 收到连接释放的报文，发出确认的报文 
 ACK = 1
 ack = u+1
 seq = u 
 服务端进入close-wait（关闭等待的状态）
 服务端发送数据的话，客户端依然要接收

 3、第三次挥手
服务端发送一个FIN结束到顾客端，服务端关闭顾客端的连接
服务器将最后的数据发送完毕之后，就向顾客端发动连接释放的报文
服务端可能有发送了一些数据，进入一个最终的确认的状态


4、第四次挥手
server端收到FIN结束报文的时候，先回复一个ack报文，指明关闭连接请求已收到，
但是还是要把数据传输完成
只有等server的所有报文都传输完毕