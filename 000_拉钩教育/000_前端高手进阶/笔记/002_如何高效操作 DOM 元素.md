# 如何高效操作 DOM 元素

# 什么是DOM

DOM（Document Object Model，文档对象模型）

1、是Javascript操作HTML接口（这里只讨论属于前端范畴的HTML DOM）

2、属于前端的入门知识，同样也是核心内容

3、因为大部分前端功能都需要借助DOM来实现


1、动态渲染列表、表格表单数据

2、监听点击、提交事件

3、懒加载一些脚本或者样式文件

4、实现动态展开树组件，表单组件级联等这类复杂的操作



### DOM V3标准

DOM节点
DOM事件
选择区域


### 标签元素区分
标签是 HTML 的基本单位，比如 p、div、input；
节点是 DOM 树的基本单位，有多种类型，比如注释节点、文本节点；
元素是节点中的一种，与 HTML 标签相对应，比如 p 标签会对应 p 元素。



### 为什么说DOM操作耗时


1、线程切换

渲染引擎（浏览器内核）

Javascript


单线程
优势：开发方便，避免多线程下的死锁、竞争问题
劣势：失去了并发能力


2、重新渲染

浏览器在渲染页面时会将 HTML 和 CSS 分别解析成 DOM 树和 CSSOM 树，然后合并进行排布，再绘制成我们可见的页面。如果在操作 DOM 时涉及到元素、样式的修改，就会引起渲染引擎重新计算样式生成 CSSOM 树，同时还有可能触发对元素的重新排布（简称“重排”）和重新绘制（简称“重绘”）。

重排：

修改元素边距、大小
添加、删除元素
改变窗口大小

重绘：
设置背景图片
修改字体颜色
改变 visibility 属性值



### 如何高效操作 DOM


1、在循环外操作元素

2、批量操作元素

3、缓存元素集合


### 总结

1、尽量不要使用复杂的匹配规则和复杂的样式，从而减少渲染引擎计算样式规则生成 CSSOM 树的时间；
2、尽量减少重排和重绘影响的区域；
3、使用 CSS3 特性来实现动画效果。